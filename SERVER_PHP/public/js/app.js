(()=>{var t=$("#header__sticky"),e=0;function o(t,o){void 0!==o&&jQuery.isNumeric(o)||(o=0),void 0===e&&(e=0),$(window).scrollTop()>=o?(0===$("#just-for-height").length&&t.after('<div id="just-for-height" style="height:'+t.outerHeight()+'px"></div>'),t.addClass("sticky")):(t.removeClass("show"),t.removeClass("sticky"),$("#just-for-height").remove()),t.hasClass("sticky")&&($(window).scrollTop()>0&&0==e||$(window).scrollTop()<e?t.addClass("show"):t.removeClass("show")),e=$(window).scrollTop()}$(document).ready((function(){if(Tipped.create(".simple-tooltip",{skin:"light",size:"large"}),t.length&&!window.IS_ROBOT){var e=t.offset().top+1;o(t,e),$(window).on("scroll",(function(){o(t,e)}))}t.find("#js_menu__mobile_close").click((function(){$("#menu").toggleClass("show"),$("body").toggleClass("neo-scroll")})),$("#js_btn_header_toggle__menu").click((function(){$("#menu").toggleClass("show"),$("body").toggleClass("neo-scroll")})),function(){if("undefined"!=typeof Storage){var t=JSON.parse(localStorage.getItem("LIKES"))||[];console.log(t),$(".js__counter").parent().each((function(e,o){t.some((function(t){return t==$(o).attr("data-react-like")}))&&$(o).addClass("active")}))}}()})),window.changeDistrict=function(t){var e=t.value,o=$("#js__select-commune");(o.find("option").not(":first").remove(),0==e)?o.val(e):fetch("/api/v1/commune/"+e).then((function(t){return t.json()})).then((function(t){for(var n=function(t,e,o){for(var n=[],a=0;a<t.length;a++)if(t[a][e]==o){var i={id:t[a].id,text:t[a].text};n.push(i)}return n}(t.data,"district",e),a="",i=0;i<n.length;i++)a+='<option value="'.concat(n[i].id,'">').concat(n[i].text,"</option>");return console.log(a),o.html(o.html()+a),!0})).catch((function(t){console.log(t)}))},window.toggleLikePost=function(t,e){if("undefined"==typeof Storage)return alert("Trình duyệt không hộ trợ tính năng like, vui lòng thử lại trinh duyệt khác!!!"),!1;var o=$(t);o.toggleClass("active"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var n=JSON.parse(localStorage.getItem("LIKES"))||[],a=n.some((function(t){return t==o.attr("data-react-like")}))?-1:1;$.ajax({type:"PATCH",url:window.AJAX_TOGGLE_LIKE_PRODUCT,data:{product_id:e,increment:a},dataType:"JSON",success:function(t){if(console.log(t),200==t.status)if(o.find(".js__counter").text(t.data.like?"(".concat(t.data.like,")"):""),t.data.active)n.push(o.attr("data-react-like")),localStorage.setItem("LIKES",JSON.stringify(n));else{var e=n.filter((function(t){return t!=o.attr("data-react-like")}));localStorage.setItem("LIKES",JSON.stringify(e))}else console.log(t),o.toggleClass("active")},error:function(t,e,n){var a=JSON.parse(t.responseText);console.log(a),o.toggleClass("active")}})}})();